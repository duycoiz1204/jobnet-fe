import categoryService from '@/services/categoryService'
import postService from '@/services/postService'
import professionService from '@/services/professionService'
import React from 'react'
import { headers } from 'next/headers'
import { Metadata } from 'next'
import PostsClient from '@/app/(pages)/[lang]/(jobseeker)/posts/PostsClient'

export const metadata: Metadata = {
  title: "Job Posts",
  description: "All open posts about job ",
};

type Props = {}

export default async function Posts({ }: Props) {
  const header = headers()
  const url = header.get("x-url")
  const searchParams = new URL(url as string).searchParams

  const search = (searchParams.get('search')) ? searchParams.get('search')!! : ''
  console.log("Search: ", search);
  
  // Fetching
  const posts = await postService.getPosts({
    search
  })
  const paginationPosts = {
    totalElements: posts.length, 
    totalPages: Math.ceil(posts.length / 5),
    currentPage: 1,
    hasNextPage: Math.ceil(posts.length / 5) !== 1,
    data: posts.slice(0, 5)
  }
  // const categories = await categoryService.getCategories()
  // const professions = await professionService.getProfessions()
  const professions = [{'id': '65e097a4bfdb92a961c286a6', 'name': 'Bán hàng / Kinh doanh', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286a5', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286a7', 'name': 'Bán lẻ / Bán sỉ', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286a5', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286a8', 'name': 'Tiếp thị / Marketing', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286a5', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286a9', 'name': 'Tiếp thị trực tuyến', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286a5', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286ab', 'name': 'Tư vấn', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286ac', 'name': 'Vận chuyển / Giao nhận /  Kho vận', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286ad', 'name': 'Lao động phổ thông', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286ae', 'name': 'Dịch vụ khách hàng', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286af', 'name': 'Phi chính phủ / Phi lợi nhuận', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b0', 'name': 'An Ninh / Bảo Vệ', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b1', 'name': 'Luật / Pháp lý', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b2', 'name': 'Bưu chính viễn thông', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286aa', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b4', 'name': 'Y tế / Chăm sóc sức khỏe', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b3', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b5', 'name': 'Dược phẩm', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b3', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b7', 'name': 'Thu mua / Vật tư', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b8', 'name': 'Xuất nhập khẩu', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286b9', 'name': 'Sản xuất / Vận hành sản xuất', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286ba', 'name': 'Đồ gỗ', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286bb', 'name': 'In ấn / Xuất bản', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286bc', 'name': 'An toàn lao động', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286bd', 'name': 'Quản lý chất lượng (QA/QC)', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286be', 'name': 'Dệt may / Da giày / Thời trang', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286b6', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286c0', 'name': 'Hàng gia dụng / Chăm sóc cá nhân', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286bf', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286c1', 'name': 'Thực phẩm & Đồ uống', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286bf', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286c3', 'name': 'CNTT - Phần cứng / Mạng', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286c2', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286c4', 'name': 'CNTT - Phần mềm', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286c2', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286c6', 'name': 'Hành chính / Thư ký', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286c5', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286c7', 'name': 'Biên phiên dịch', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286c5', 'totalPosts': 0}, {'id': '65e097a4bfdb92a961c286c8', 'name': 'Nhân sự', 'englishName': null, 'categoryId': '65e097a4bfdb92a961c286c5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286ca', 'name': 'Bảo hiểm', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286c9', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286cb', 'name': 'Kế toán / Kiểm toán', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286c9', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286cc', 'name': 'Chứng khoán', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286c9', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286cd', 'name': 'Ngân hàng', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286c9', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286ce', 'name': 'Tài chính / Đầu tư', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286c9', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d0', 'name': 'Giải trí', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286cf', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d1', 'name': 'Tổ chức sự kiện', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286cf', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d2', 'name': 'Truyền hình / Báo chí / Biên tập', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286cf', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d3', 'name': 'Quảng cáo / Đối ngoại / Truyền Thông', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286cf', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d4', 'name': 'Mỹ thuật / Nghệ thuật / Thiết kế', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286cf', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d6', 'name': 'Nội ngoại thất', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286d5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d7', 'name': 'Kiến trúc', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286d5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d8', 'name': 'Xây dựng', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286d5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286d9', 'name': 'Bất động sản', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286d5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286db', 'name': 'Dầu khí', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286da', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286dc', 'name': 'Hóa học', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286da', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286dd', 'name': 'Khoáng sản', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286da', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286de', 'name': 'Cơ khí / Ô tô / Tự động hóa', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286da', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286df', 'name': 'Môi trường', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286da', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e0', 'name': 'Điện / Điện tử / Điện lạnh', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286da', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e1', 'name': 'Bảo trì / Sửa chữa', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286da', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e3', 'name': 'Thư viện', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e2', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e4', 'name': 'Giáo dục / Đào tạo', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e2', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e6', 'name': 'Nông nghiệp', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e7', 'name': 'Thống kê', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e8', 'name': 'Chăn nuôi / Thú y', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286e9', 'name': 'Thủy lợi', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286ea', 'name': 'Công nghệ sinh học', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286eb', 'name': 'Hàng hải', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286ec', 'name': 'Công nghệ thực phẩm / Dinh dưỡng', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286ed', 'name': 'Lâm Nghiệp', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286ee', 'name': 'Trắc địa / Địa Chất', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286ef', 'name': 'Thủy sản / Hải sản', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286e5', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286f1', 'name': 'Hàng không', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286f0', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286f2', 'name': 'Nhà hàng / Khách sạn', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286f0', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286f3', 'name': 'Du lịch', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286f0', 'totalPosts': 0}, {'id': '65e097a5bfdb92a961c286f5', 'name': 'Ngành khác', 'englishName': null, 'categoryId': '65e097a5bfdb92a961c286f4', 'totalPosts': 0}]
  const categories = [{'id': '65e097a4bfdb92a961c286a5', 'name': 'Tìm việc làm Bán hàng / Tiếp thị'}, {'id': '65e097a4bfdb92a961c286aa', 'name': 'Tìm việc làm Dịch vụ'}, {'id': '65e097a4bfdb92a961c286b3', 'name': 'Tìm việc làm Chăm sóc sức khỏe'}, {'id': '65e097a4bfdb92a961c286b6', 'name': 'Tìm việc làm Sản xuất'}, {'id': '65e097a4bfdb92a961c286bf', 'name': 'Tìm việc làm Hàng tiêu dùng'}, {'id': '65e097a4bfdb92a961c286c2', 'name': 'Tìm việc làm Máy tính / Công nghệ thông tin'}, {'id': '65e097a4bfdb92a961c286c5', 'name': 'Tìm việc làm Hành chính / Nhân sự'}, {'id': '65e097a5bfdb92a961c286c9', 'name': 'Tìm việc làm Kế toán / Tài chính'}, {'id': '65e097a5bfdb92a961c286cf', 'name': 'Tìm việc làm Truyền thông / Media'}, {'id': '65e097a5bfdb92a961c286d5', 'name': 'Tìm việc làm Xây dựng'}, {'id': '65e097a5bfdb92a961c286da', 'name': 'Tìm việc làm Kỹ thuật'}, {'id': '65e097a5bfdb92a961c286e2', 'name': 'Tìm việc làm Giáo dục / Đào tạo'}, {'id': '65e097a5bfdb92a961c286e5', 'name': 'Tìm việc làm Khoa học'}, {'id': '65e097a5bfdb92a961c286f0', 'name': 'Tìm việc làm Khách sạn / Du lịch'}, {'id': '65e097a5bfdb92a961c286f4', 'name': 'Tìm việc làm Nhóm ngành khác'}]

  return (
    <PostsClient posts={posts} paginationPosts={paginationPosts} categories={categories} professions={professions} />
  )
}